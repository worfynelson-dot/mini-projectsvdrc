<!DOCTYPE html>>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>GHOST_OS_RECOVERY</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Segoe+UI&family=VT323&family=Noto+Sans+KR:wght@400;700&family=Noto+Sans+SC:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --win-bg: rgba(20, 20, 25, 0.85);
            --win-border: rgba(255, 255, 255, 0.1);
            --accent: #0078d4;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            overflow: hidden;
            background: #000;
            color: #fff;
            user-select: none;
            height: 100vh;
        }

        .lang-cjk { font-family: 'Noto Sans KR', 'Noto Sans SC', sans-serif; }

        /* Windows 11 Mica-like effect */
        .mica {
            backdrop-filter: blur(20px) saturate(180%);
            background: var(--win-bg);
            border: 1px solid var(--win-border);
            border-radius: 8px;
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.8);
        }

        /* Taskbar Blur */
        .taskbar {
            backdrop-filter: blur(15px);
            background: rgba(15, 15, 15, 0.8);
            border-top: 1px solid rgba(255, 255, 255, 0.05);
        }

        /* CRT & Horror Overlay */
        .crt-overlay {
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.1) 50%), linear-gradient(90deg, rgba(255, 0, 0, 0.03), rgba(0, 255, 0, 0.01), rgba(0, 0, 255, 0.03));
            background-size: 100% 3px, 3px 100%;
            pointer-events: none;
            z-index: 9999;
        }

        @keyframes glitch-anim {
            0% { transform: translate(0); filter: hue-rotate(0deg); }
            10% { transform: translate(-2px, 2px); filter: hue-rotate(90deg); }
            20% { transform: translate(2px, -2px); }
            100% { transform: translate(0); }
        }

        .glitch { animation: glitch-anim 0.2s infinite; }

        .desktop-icon {
            width: 80px;
            transition: all 0.2s;
            border: 1px solid transparent;
        }
        .desktop-icon:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: rgba(255, 255, 255, 0.2);
            border-radius: 4px;
        }

        .window {
            position: absolute;
            min-width: 300px;
            min-height: 200px;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .window-header {
            padding: 8px 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(255, 255, 255, 0.03);
            cursor: default;
        }

        /* Scanline flicker */
        .flicker { animation: flicker-pulse 4s infinite; }
        @keyframes flicker-pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.98; }
        }

        .boot-loader {
            width: 40px;
            height: 40px;
            border: 3px solid rgba(255,255,255,0.1);
            border-top-color: #0078d4;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        @keyframes spin { to { transform: rotate(360deg); } }

        /* Scrollbars */
        ::-webkit-scrollbar { width: 4px; }
        ::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.2); border-radius: 10px; }
    </style>
</head>
<body class="flicker">

    <div class="crt-overlay fixed inset-0 opacity-30"></div>

    <!-- START SCREEN (LOGON) -->
    <div id="logon-screen" class="fixed inset-0 z-[1000] bg-cover bg-center flex flex-col items-center justify-center transition-opacity duration-1000" style="background-image: url('https://images.unsplash.com/photo-1464822759023-fed622ff2c3b?auto=format&fit=crop&q=80&w=2070');">
        <div class="absolute inset-0 bg-black/40 backdrop-blur-md"></div>
        
        <div class="z-10 flex flex-col items-center">
            <div class="w-32 h-32 rounded-full bg-gray-700 border-4 border-white/20 mb-4 flex items-center justify-center overflow-hidden">
                <span class="text-6xl">üë§</span>
            </div>
            <h1 class="text-3xl font-light mb-6">User_2017</h1>
            
            <div id="password-box" class="flex flex-col items-center gap-4">
                <input type="password" id="logon-pass" placeholder="Password" class="bg-black/20 border border-white/30 rounded px-4 py-2 outline-none focus:border-blue-500 text-center backdrop-blur-sm">
                <button onclick="attemptLogon()" class="bg-white/10 hover:bg-white/20 px-8 py-1 rounded transition-colors border border-white/10">Sign In</button>
                <p id="logon-hint" class="text-xs text-white/50 mt-2">Hint: Check the sticky note on the desk.</p>
            </div>
        </div>

        <!-- Language Selector -->
        <div class="absolute bottom-10 flex gap-4 text-sm opacity-60">
            <span onclick="setLang('en')" class="cursor-pointer hover:underline">English</span>
            <span onclick="setLang('id')" class="cursor-pointer hover:underline">Indo</span>
            <span onclick="setLang('ko')" class="cursor-pointer hover:underline">ÌïúÍµ≠Ïñ¥</span>
            <span onclick="setLang('zh')" class="cursor-pointer hover:underline">‰∏≠Êñá</span>
        </div>
    </div>

    <!-- BOOTING OVERLAY -->
    <div id="boot-overlay" class="fixed inset-0 z-[1100] bg-black hidden flex-col items-center justify-center">
        <div class="boot-loader mb-4"></div>
        <div id="boot-status" class="text-blue-500 font-mono text-sm uppercase tracking-widest">Resuming Session...</div>
    </div>

    <!-- DESKTOP -->
    <div id="desktop" class="h-screen w-screen flex flex-col bg-cover bg-center hidden transition-all duration-700" style="background-image: url('https://images.unsplash.com/photo-1518709268805-4e9042af9f23?auto=format&fit=crop&q=80&w=1968');">
        
        <!-- Icon Grid -->
        <div id="icon-grid" class="flex-1 p-4 grid grid-flow-col grid-rows-[repeat(auto-fill,100px)] gap-2 content-start justify-start">
            <!-- Icons injected here -->
        </div>

        <!-- Taskbar -->
        <div class="taskbar h-12 w-full flex items-center justify-between px-2 z-[900]">
            <div class="flex items-center h-full gap-1">
                <button id="start-btn" class="hover:bg-white/10 p-2 rounded transition-colors">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="#0078d4"><path d="M2 3h9v9H2V3m9 19H2v-9h9v9M13 3h9v9h-9V3m9 19h-9v-9h9v9"/></svg>
                </button>
                <div id="taskbar-apps" class="flex gap-1 h-full items-center">
                    <!-- Open app previews -->
                </div>
            </div>
            
            <div class="flex items-center gap-4 text-xs px-2 opacity-80">
                <div class="flex flex-col items-end">
                    <span id="taskbar-time">12:00 PM</span>
                    <span id="taskbar-date">10/31/2017</span>
                </div>
                <div class="hover:bg-white/10 p-2 border-l border-white/10">
                    üó®Ô∏è
                </div>
            </div>
        </div>

        <!-- Window Layer -->
        <div id="window-container" class="absolute inset-0 pointer-events-none"></div>
    </div>

    <!-- AUDIO CONTAINER -->
    <div id="audio-sub"></div>

<script>
/**
 * GHOST_OS v2.0 - Core Engine
 */

const STATE = {
    lang: 'en',
    unlocked: false,
    windows: [],
    focused: null,
    zIndex: 100,
    volume: 0.5,
    currentTime: new Date('2017-10-31T23:45:00'),
    inventory: [],
    logs: []
};

const I18N = {
    en: {
        apps: {
            pc: "This PC",
            mail: "Mail",
            browser: "NetScape 17",
            notes: "Sticky Notes",
            terminal: "Command Prompt",
            gallery: "Gallery",
            rec: "Video Player",
            settings: "Settings",
            trash: "Trash"
        },
        ui: {
            logon: "Sign In",
            welcome: "Welcome",
            error: "System Error",
            decrypt: "Decrypting..."
        }
    },
    id: {
        apps: {
            pc: "Komputer Ini",
            mail: "Surel",
            browser: "Peramban",
            notes: "Catatan",
            terminal: "Terminal",
            gallery: "Galeri",
            rec: "Pemutar Video",
            settings: "Pengaturan",
            trash: "Sampah"
        }
    },
    ko: {
        apps: { pc: "ÎÇ¥ PC", mail: "Î©îÏùº", browser: "Î∏åÎùºÏö∞Ï†Ä", notes: "Î©îÎ™®Ïû•", terminal: "ÌÑ∞ÎØ∏ÎÑê", gallery: "Í∞§Îü¨Î¶¨", rec: "ÎπÑÎîîÏò§", settings: "ÏÑ§Ï†ï", trash: "Ìú¥ÏßÄÌÜµ" }
    },
    zh: {
        apps: { pc: "ËøôÂè∞ÁîµËÑë", mail: "ÈÇÆ‰ª∂", browser: "ÊµèËßàÂô®", notes: "‰æøÁ≠æ", terminal: "ÁªàÁ´Ø", gallery: "Áõ∏ÂÜå", rec: "ËßÜÈ¢ëÊí≠ÊîæÂô®", settings: "ËÆæÁΩÆ", trash: "ÂõûÊî∂Á´ô" }
    }
};

const APP_LIST = [
    { id: 'pc', icon: 'üíª', color: '#fff' },
    { id: 'mail', icon: 'üìß', color: '#4285f4' },
    { id: 'browser', icon: 'üåê', color: '#34a853' },
    { id: 'notes', icon: 'üìù', color: '#fbbc05' },
    { id: 'terminal', icon: '‚å®Ô∏è', color: '#fff' },
    { id: 'gallery', icon: 'üñºÔ∏è', color: '#ea4335' },
    { id: 'rec', icon: 'üìΩÔ∏è', color: '#ff0000' },
    { id: 'settings', icon: '‚öôÔ∏è', color: '#888' },
    { id: 'trash', icon: 'üóëÔ∏è', color: '#fff' }
];

// --- CORE UTILS ---

function setLang(l) {
    STATE.lang = l;
    if (STATE.unlocked) renderIcons();
}

function t(path) {
    const keys = path.split('.');
    let res = I18N[STATE.lang] || I18N.en;
    for (const k of keys) res = res?.[k];
    return res || path;
}

// --- LOGON LOGIC ---

function attemptLogon() {
    const pass = document.getElementById('logon-pass').value;
    // Password is 1031 (The date)
    if (pass === '1031') {
        unlockSystem();
    } else {
        document.getElementById('logon-screen').classList.add('glitch');
        playAudio('error');
        setTimeout(() => document.getElementById('logon-screen').classList.remove('glitch'), 500);
    }
}

function unlockSystem() {
    const logon = document.getElementById('logon-screen');
    const boot = document.getElementById('boot-overlay');
    
    logon.style.opacity = '0';
    setTimeout(() => {
        logon.style.display = 'none';
        boot.style.display = 'flex';
        
        setTimeout(() => {
            boot.style.display = 'none';
            document.getElementById('desktop').classList.remove('hidden');
            STATE.unlocked = true;
            initDesktop();
        }, 2000);
    }, 1000);
}

// --- DESKTOP ENGINE ---

function initDesktop() {
    renderIcons();
    startClock();
    playAudio('startup');
    
    // Auto-open Mail as a hook
    setTimeout(() => openApp('mail'), 1000);
}

function renderIcons() {
    const grid = document.getElementById('icon-grid');
    grid.innerHTML = '';
    APP_LIST.forEach(app => {
        const div = document.createElement('div');
        div.className = "desktop-icon flex flex-col items-center p-2 cursor-default group pointer-events-auto";
        div.onclick = () => openApp(app.id);
        div.innerHTML = `
            <div class="text-4xl mb-1 group-hover:scale-110 transition-transform">${app.icon}</div>
            <span class="text-[11px] text-center leading-tight drop-shadow-md text-white/90">${t('apps.'+app.id)}</span>
        `;
        grid.appendChild(div);
    });
}

function startClock() {
    setInterval(() => {
        STATE.currentTime.setSeconds(STATE.currentTime.getSeconds() + 1);
        const timeStr = STATE.currentTime.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
        const dateStr = STATE.currentTime.toLocaleDateString();
        document.getElementById('taskbar-time').innerText = timeStr;
        document.getElementById('taskbar-date').innerText = dateStr;
    }, 1000);
}

// --- WINDOW MANAGEMENT ---

function openApp(id) {
    if (STATE.windows.includes(id)) {
        focusWindow(id);
        return;
    }

    STATE.windows.push(id);
    const win = document.createElement('div');
    win.id = `win-${id}`;
    win.className = "window mica pointer-events-auto";
    win.style.zIndex = ++STATE.zIndex;
    
    // Responsive sizing
    const isMobile = window.innerWidth < 640;
    win.style.width = isMobile ? '95%' : '600px';
    win.style.height = isMobile ? '70%' : '400px';
    win.style.left = isMobile ? '2.5%' : `${100 + (STATE.windows.length * 20)}px`;
    win.style.top = isMobile ? '10%' : `${100 + (STATE.windows.length * 20)}px`;

    win.onmousedown = () => focusWindow(id);

    win.innerHTML = `
        <div class="window-header border-b border-white/10" onmousedown="dragStart(event, '${id}')">
            <div class="flex items-center gap-2">
                <span>${APP_LIST.find(a => a.id === id).icon}</span>
                <span class="text-xs font-semibold">${t('apps.'+id)}</span>
            </div>
            <div class="flex gap-4">
                <button class="hover:text-gray-400" onclick="closeApp('${id}')">‚úï</button>
            </div>
        </div>
        <div class="flex-1 overflow-auto bg-black/20 p-4 text-sm">
            ${getAppHTML(id)}
        </div>
    `;

    document.getElementById('window-container').appendChild(win);
    focusWindow(id);
    playAudio('click');
}

function focusWindow(id) {
    const win = document.getElementById(`win-${id}`);
    if (win) {
        win.style.zIndex = ++STATE.zIndex;
        STATE.focused = id;
    }
}

function closeApp(id) {
    const win = document.getElementById(`win-${id}`);
    if (win) {
        win.remove();
        STATE.windows = STATE.windows.filter(w => w !== id);
    }
}

// --- APP CONTENT GENERATOR ---

function getAppHTML(id) {
    switch(id) {
        case 'mail':
            return `
                <div class="flex flex-col h-full">
                    <div class="flex gap-4 mb-4 border-b border-white/10 pb-2">
                        <div class="w-1/3 border-r border-white/10 space-y-2">
                            <div class="p-2 bg-blue-500/20 rounded cursor-pointer" onclick="viewMail(1)">
                                <div class="font-bold">Mom</div>
                                <div class="text-[10px] opacity-60">Come home...</div>
                            </div>
                            <div class="p-2 hover:bg-white/5 rounded cursor-pointer" onclick="viewMail(2)">
                                <div class="font-bold">System Admin</div>
                                <div class="text-[10px] opacity-60">Storage Critical</div>
                            </div>
                        </div>
                        <div id="mail-body" class="flex-1 p-2 italic text-gray-400">
                            Select a message to read.
                        </div>
                    </div>
                </div>
            `;
        case 'browser':
            return `
                <div class="flex flex-col h-full">
                    <div class="bg-gray-800 p-2 flex gap-2 items-center rounded-t">
                        <input id="browser-url" type="text" value="https://ghost.search" class="bg-black/40 flex-1 px-2 py-1 rounded outline-none text-xs">
                        <button onclick="navigate()" class="text-xs bg-blue-600 px-2 py-1 rounded">Go</button>
                    </div>
                    <div id="browser-frame" class="flex-1 bg-white text-black p-4 font-serif overflow-auto">
                        <h1 class="text-2xl font-bold">Search results for "Subject 2017"</h1>
                        <hr class="my-2">
                        <p class="text-blue-700 underline cursor-pointer">Local woman missing after downloading strange OS...</p>
                        <p class="text-sm">Police are still looking for clues. The only thing left was her computer running a recovery mode...</p>
                    </div>
                </div>
            `;
        case 'terminal':
            return `
                <div id="term-out" class="font-mono text-green-500 h-[250px] overflow-auto mb-2">
                    Microsoft Ghost Terminal [Version 2.0.1031]<br>
                    (c) 2017 Ghost Corp. All rights reserved.<br><br>
                    Type 'help' for commands.
                </div>
                <div class="flex gap-2">
                    <span>></span>
                    <input id="term-in" class="bg-transparent flex-1 outline-none font-mono" onkeypress="handleTerm(event)">
                </div>
            `;
        case 'notes':
            return `
                <textarea class="w-full h-full bg-transparent outline-none resize-none font-mono text-yellow-200" placeholder="Type here...">
Important Dates:
- Wedding: Jun 12
- Sarah Birthday: Aug 05
- The incident: Oct 31 (Halloween)

Password hint: The date of the incident (MMDD).
                </textarea>
            `;
        case 'rec':
            return `
                <div class="relative w-full h-full bg-black flex items-center justify-center">
                    <div class="absolute top-2 left-2 text-red-600 animate-pulse font-bold text-xs">‚óè REC</div>
                    <div class="text-white/20 text-4xl">FILE_CORRUPTED</div>
                    <div class="absolute bottom-4 flex gap-4">
                        <button class="text-2xl" onclick="triggerHorror()">‚ñ∂</button>
                    </div>
                </div>
            `;
        case 'gallery':
            return `
                <div class="grid grid-cols-3 gap-2">
                    ${[1,2,3,4,5,6].map(i => `<div class="aspect-square bg-gray-800 border border-white/10 flex items-center justify-center grayscale hover:grayscale-0 transition-all cursor-zoom-in" onclick="playAudio('scare')">?</div>`).join('')}
                </div>
            `;
        default: return `<div class='p-10 text-center opacity-50'>App content currently inaccessible. Error 0x800.</div>`;
    }
}

// --- APP HELPERS ---

function viewMail(id) {
    const body = document.getElementById('mail-body');
    if (id === 1) {
        body.innerHTML = `
            <h2 class="font-bold text-white not-italic">From: Mom</h2>
            <p class="mt-2">Honey, why aren't you answering your phone? It's Halloween night, you should be at the party. Please log off that computer and call me.</p>
        `;
    } else {
        body.innerHTML = `
            <h2 class="font-bold text-white not-italic">From: System Admin</h2>
            <p class="mt-2">Your storage is 99% full of unidentified encrypted blobs. System instability imminent. Please run 'cleanup' in Terminal.</p>
        `;
    }
    playAudio('click');
}

function handleTerm(e) {
    if (e.key === 'Enter') {
        const input = document.getElementById('term-in');
        const out = document.getElementById('term-out');
        const cmd = input.value.toLowerCase().trim();
        
        let response = "";
        if (cmd === 'help') response = "Available: ls, cat, help, cleanup, whoami";
        else if (cmd === 'ls') response = "root_access.key, hidden_vid.mp4, user_data.bak";
        else if (cmd === 'whoami') response = "Subject_2017 (Status: MERGED)";
        else if (cmd === 'cleanup') {
            triggerGlitch();
            response = "ERROR: Failed to delete 'GHOST_CORE.SYS'. Access Denied.";
        }
        else response = `Unknown command: ${cmd}`;

        out.innerHTML += `<br><span class='text-white'>> ${cmd}</span><br>${response}`;
        input.value = "";
        out.scrollTop = out.scrollHeight;
        playAudio('click');
    }
}

// --- HORROR & GLITCHES ---

function triggerGlitch() {
    document.body.classList.add('glitch');
    playAudio('error');
    setTimeout(() => document.body.classList.remove('glitch'), 400);
}

function triggerHorror() {
    playAudio('scare');
    document.body.style.filter = 'invert(1)';
    triggerGlitch();
    setTimeout(() => document.body.style.filter = 'none', 1000);
}

// --- AUDIO ENGINE ---

function playAudio(type) {
    const ctx = new (window.AudioContext || window.webkitAudioContext)();
    const osc = ctx.createOscillator();
    const gain = ctx.createGain();
    
    osc.connect(gain);
    gain.connect(ctx.destination);
    
    const now = ctx.currentTime;
    
    switch(type) {
        case 'click':
            osc.frequency.setValueAtTime(800, now);
            gain.gain.setValueAtTime(0.05, now);
            gain.gain.exponentialRampToValueAtTime(0.01, now + 0.1);
            osc.start(); osc.stop(now + 0.1);
            break;
        case 'startup':
            osc.frequency.setValueAtTime(200, now);
            osc.frequency.exponentialRampToValueAtTime(800, now + 1);
            gain.gain.setValueAtTime(0.1, now);
            gain.gain.linearRampToValueAtTime(0, now + 1);
            osc.start(); osc.stop(now + 1);
            break;
        case 'error':
            osc.type = 'sawtooth';
            osc.frequency.setValueAtTime(120, now);
            gain.gain.setValueAtTime(0.1, now);
            gain.gain.linearRampToValueAtTime(0, now + 0.5);
            osc.start(); osc.stop(now + 0.5);
            break;
        case 'scare':
            osc.type = 'sawtooth';
            osc.frequency.setValueAtTime(60, now);
            osc.frequency.linearRampToValueAtTime(20, now + 2);
            gain.gain.setValueAtTime(0.3, now);
            gain.gain.linearRampToValueAtTime(0, now + 2);
            osc.start(); osc.stop(now + 2);
            break;
    }
}

// --- DRAG LOGIC ---

let activeDrag = null;
function dragStart(e, id) {
    const win = document.getElementById(`win-${id}`);
    const offset = { x: e.clientX - win.offsetLeft, y: e.clientY - win.offsetTop };
    
    const move = (e) => {
        win.style.left = `${e.clientX - offset.x}px`;
        win.style.top = `${e.clientY - offset.y}px`;
    };
    
    const stop = () => {
        window.removeEventListener('mousemove', move);
        window.removeEventListener('mouseup', stop);
    };
    
    window.addEventListener('mousemove', move);
    window.addEventListener('mouseup', stop);
}

// Global Event Listeners
document.addEventListener('contextmenu', e => e.preventDefault());

</script>
</body>
</html>```

<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>Hacked Shadows - Full Horror Desktop Game</title>
<style>
*{margin:0;padding:0;box-sizing:border-box;}body{background:#111;font-family:Segoe UI,sans-serif;overflow:hidden;color:#fff;height:100vh;position:relative;cursor:none;}#desktop{width:100vw;height:100vh;background:url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiB2aWV3Qm94PSIwIDAgMTIwMCAxMDAwIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxkZWZzPjxwYXR0ZXJuIGlkPSJkYXJrIiB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHBhdHRlcm5Vbml0cz0idXNlclNwYWNlT25Vc2UiPjxwYXRoIGQ9Ik0wIDBoNDAvdjQwaC00MFoiIGZpbGw9IiMwMDAiLz48L3PhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZGFyaykiIG9wYWNpdHk9IjAuOCIvPjxjaXJjbGUgY3g9IjUwJSIgY3k9IjUwJSIgcj0iMTAiIGZpbGw9IiMwMDAiIG9wYWNpdHk9IjAuMyIvPjwvc3ZnPg==') center/cover;position:relative;}#taskbar{position:fixed;bottom:0;left:0;width:100%;height:40px;background:linear-gradient(to top,#000,#333);display:flex;align-items:center;padding:0 10px;z-index:1000;}#start{width:40px;height:30px;background:#00ff00;margin-right:10px;border-radius:3px;}#clock{color:#fff;font-size:14px;font-weight:600;}#window{position:absolute;top:50px;left:50px;background:#222;border:2px solid #444;border-radius:8px;box-shadow:0 0 20px rgba(0,255,0,0.3);display:none;overflow:hidden;min-width:400px;max-width:90vw;max-height:80vh;}#titlebar{background:linear-gradient(to right,#333,#111);height:30px;display:flex;align-items:center;padding:0 10px;font-weight:600;color:#fff;cursor:move;}.close{margin-left:auto;background:#f00;width:20px;height:20px;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;}#content{padding:15px;height:calc(100% - 35px);overflow:auto;}#terminal{background:#000;color:#0f0;font-family:'Courier New',monospace;font-size:14px;line-height:1.4;white-space:pre-wrap;min-height:200px;}#pointer{position:absolute;width:20px;height:20px;background:radial-gradient(circle,#fff 0%,#0f0 50%,transparent 70%);pointer-events:none;z-index:999;transition:all 0.1s;border-radius:50%;box-shadow:0 0 10px #0f0;}.icon{position:absolute;width:80px;height:80px;background:#333;border-radius:10px;display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;font-size:12px;color:#ccc;transition:0.2s;box-shadow:0 4px 8px rgba(0,0,0,0.5);}.icon:hover{background:#444;box-shadow:0 0 20px #0f0;}.icon.active{box-shadow:0 0 30px #f00,inset 0 0 20px #f00;background:#111;}#icons{position:absolute;}.desktop-icon{margin:20px;}#loading{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-size:24px;color:#0f0;}.fade{opacity:0;transition:opacity 1s;}.horror-shake{animation:shake 0.5s infinite;}@keyframes shake{0%,100%{transform:translateX(0);}25%{transform:translateX(-5px);}75%{transform:translateX(5px);}}.ghost{position:absolute;width:80px;height:80px;background:rgba(255,0,0,0.6);border-radius:50%;font-size:40px;pointer-events:none;z-index:500;animation:ghostMove 5s infinite;}@keyframes ghostMove{0%{opacity:0.5;transform:translateY(0) scale(1);}50%{opacity:1;transform:translateY(-20px) scale(1.2);}100%{opacity:0.5;transform:translateY(0) scale(1);}}.kb-row{display:flex;margin:5px 0;}.kb-key{width:40px;height:40px;background:#444;margin:2px;border-radius:5px;display:flex;align-items:center;justify-content:center;cursor:pointer;font-size:18px;}.kb-key:active{background:#666;}@media (max-width:768px){.icon{width:60px;height:60px;font-size:10px;}.desktop-icon{margin:10px;}}
</style>
</head>
<body>
<div id="desktop">
  <div id="icons">
    <div class="icon" data-app="files" style="top:20px;left:20px;"><div>üìÅ</div>Files</div>
    <div class="icon" data-app="browser" style="top:20px;left:120px;"><div>üåê</div>Browser</div>
    <div class="icon" data-app="terminal" style="top:120px;left:20px;"><div>‚ö°</div>Terminal</div>
    <div class="icon" data-app="phone" style="top:120px;left:120px;"><div>üì±</div>PhoneHack</div>
  </div>
</div>
<div id="taskbar">
  <div id="start" title="Start"></div>
  <div id="clock"></div>
</div>
<div id="window">
  <div id="titlebar"><span id="title">App</span><div class="close">&times;</div></div>
  <div id="content"></div>
</div>
<div id="pointer"></div>
<div id="loading">Initializing Haunted OS... <span id="loadbar">‚ñà</span></div>
<div id="osk" style="position:fixed;bottom:50px;left:10px;display:none;background:#222;padding:10px;border-radius:10px;z-index:1001;">
  <div class="kb-row">1 2 3 4 5 6 7 8 9 0</div>
  <div class="kb-row">q w e r t y u i o p</div>
  <div class="kb-row">a s d f g h j k l</div>
  <div class="kb-row">z x c v b n m &nbsp; &nbsp;</div>
  <div class="kb-row"><div class="kb-key" onclick="termBackspace()">‚å´</div>Enter</div>
</div>
<script>
// Full Fixed Game Engine - Standalone Horror Desktop (Win11/Mobile, 30min play, Scrapy Hack Scene)
let gameState={scene:0,time:0,maxTime:1800,hacked:false,phoneData:'',horrorLevel:0,ended:false};let currentWindow='';let dragOffset={x:0,y:0};let isDragging=false;let mouseX=0,mouseY=0;let termInput='';let hackTerm=null;let audioCtx;let horrorVol=0.1;
const desktop=document.getElementById('desktop'),pointer=document.getElementById('pointer'),windowEl=document.getElementById('window'),titlebar=document.getElementById('titlebar'),title=document.getElementById('title'),content=document.getElementById('content'),loading=document.getElementById('loading'),clock=document.getElementById('clock'),startBtn=document.getElementById('start'),icons=document.querySelectorAll('.icon'),osk=document.getElementById('osk');
let termLines=[];function init(){initAudio();updatePointer();setInterval(updateGameLoop,50);setInterval(updateClock,1000);loading.id='loading';setTimeout(hideLoading,3000);icons.forEach(i=>i.addEventListener('click',e=>openApp(i.dataset.app)));startBtn.addEventListener('click',toggleStart);windowEl.querySelector('.close').onclick=closeWindow;titlebar.onmousedown=startDrag;content.onclick=focusContent;osk.querySelectorAll('.kb-key').forEach(k=>k.onclick=kbClick);window.onresize=updatePointer;}init();
function initAudio(){try{audioCtx=new(window.AudioContext||window.webkitAudioContext)();}catch(e){console.log('Audio locked - click to unlock');}}function unlockAudio(){if(audioCtx.state==='suspended')audioCtx.resume();}document.addEventListener('click',unlockAudio);
function playHorrorSound(freq,dur=1,vol=0.3,type='sine'){if(!audioCtx||audioCtx.state!=='running')return;let osc=audioCtx.createOscillator(),gain=audioCtx.createGain();osc.connect(gain);gain.connect(audioCtx.destination);osc.frequency.setValueAtTime(freq,audioCtx.currentTime);osc.type=type;gain.gain.setValueAtTime(vol*horrorVol,audioCtx.currentTime);gain.gain.exponentialRampToValueAtTime(0.01,audioCtx.currentTime+dur);osc.start();osc.stop(audioCtx.currentTime+dur);}
function playCreep(){playHorrorSound(60+Math.random()*40,3,0.1,'sawtooth');}function playScream(){playHorrorSound(900,0.6,0.5,'sawtooth');setTimeout(()=>playHorrorSound(500,1.2,0.4,'square'),300);}function playHeartbeat(){playHorrorSound(70+Math.sin(gameState.time/10)*10,0.4,0.15,'sine');}
function updatePointer(e){if(e){if(e.touches&&e.touches[0]){mouseX=e.touches[0].clientX;mouseY=e.touches[0].clientY;}else{mouseX=e.clientX||mouseX;mouseY=e.clientY||mouseY;}}pointer.style.left=mouseX-10+'px';pointer.style.top=mouseY-10+'px';}
document.addEventListener('mousemove',updatePointer);document.addEventListener('touchmove',updatePointer,{passive:true});document.addEventListener('mousedown',handleInput);document.addEventListener('touchstart',handleInput,{passive:false});function handleInput(e){e.preventDefault();updatePointer(e);let el=document.elementFromPoint(mouseX,mouseY);if(el.closest('.icon')){openApp(el.closest('.icon').dataset.app);}else if(el.closest('.close')){closeWindow();}else if(el.closest('#start')){toggleStart();}else if(el.closest('.kb-key')){return;}else if(currentWindow==='terminal'||currentWindow==='phone'){focusContent();}checkHorrorClick();}
function openApp(app){closeWindow();currentWindow=app;windowEl.style.display='block';title.textContent=app.toUpperCase();updateContent(app);document.querySelector(`[data-app="${app}"]`).classList.add('active');icons.forEach(i=>!i.dataset.app||i.dataset.app!==app?i.classList.remove('active'):null);playCreep();}
function updateContent(app){content.innerHTML='';if(app==='files'){content.innerHTML='<p>Haunted Files:<br>- creepy_log.txt: "Shadows move at night..."<br>- shadow.mp4: <button onclick="playShadow()">Play (DANGER)</button><br><br>Time left: <span id="timer"></span></p>';gameState.scene=1;}
else if(app==='browser'){content.innerHTML='<p>DarkWeb Portal...</p><button onclick="darkWebEvent()">Enter Abyss</button>';}
else if(app==='terminal'){termLines=['$ haunted_os> Welcome intruder...'];updateTerm();osk.style.display='block';}
else if(app==='phone'){content.innerHTML='<p>Target: Bad Guy\'s Phone (Fictional Scrapy Hack)</p><button onclick="startScrapyHack()">Run Scrapy Spider</button>';}}
function closeWindow(){windowEl.style.display='none';currentWindow='';icons.forEach(i=>i.classList.remove('active'));osk.style.display='none';}
function focusContent(){content.focus();}
function startDrag(e){isDragging=true;dragOffset.x=e.clientX-(parseFloat(windowEl.style.left)||50);dragOffset.y=e.clientY-(parseFloat(windowEl.style.top)||50);}
document.addEventListener('mousemove',e=>{if(isDragging){windowEl.style.left=e.clientX-dragOffset.x+'px';windowEl.style.top=e.clientY-dragOffset.y+'px';}});document.addEventListener('mouseup',()=>isDragging=false);
function toggleStart(){let menu='Playtime: '+Math.floor(gameState.time/60)+'m | Horror: '+gameState.horrorLevel+'/10<br>Scenes: '+gameState.scene+' | Hacked: '+(gameState.hacked?'YES':'NO');alert('HAUNTED START MENU\n'+menu);}
function updateClock(){clock.textContent=new Date().toLocaleTimeString();gameState.time++;document.getElementById('timer')&&(document.getElementById('timer').textContent=(gameState.maxTime-gameState.time)+'s');playHeartbeat();if(gameState.time>=gameState.maxTime&&!gameState.ended){endGame();}}
function hideLoading(){loading.remove();}
function checkHorrorClick(){if(Math.random()<gameState.horrorLevel*0.02){horrorEvent();}}
function horrorEvent(){gameState.horrorLevel=Math.min(10,gameState.horrorLevel+1);desktop.classList.add('horror-shake');playScream();setTimeout(()=>desktop.classList.remove('horror-shake'),1000);}
function showGhost(){let ghost=document.createElement('div');ghost.className='ghost';ghost.innerHTML='üëª';ghost.style.left=(Math.random()*90)+'vw';ghost.style.top=(Math.random()*70)+'vh';desktop.appendChild(ghost);setTimeout(()=>ghost.remove(),5000);playCreep();}
function playShadow(){horrorEvent();content.innerHTML+='<p style="color:#f00;">SCREAMS... You see YOUR FACE!</p>';}
function darkWebEvent(){content.innerHTML='<p>Downloading virus... Horror Level +3</p>';gameState.horrorLevel+=3;setTimeout(showGhost,1000);}
function updateTerm(){let term=document.createElement('div');term.id='terminal';term.style.cssText='background:#000;color:#0f0;font-family:monospace;font-size:14px;line-height:1.4;white-space:pre-wrap;height:300px;overflow:auto;padding:10px;';term.textContent=termLines.join('\n')+'$ > '+termInput;content.innerHTML='';content.appendChild(term);}
function kbClick(e){let key=e.target.textContent;if(key==='‚å´'){termBackspace();}else if(key==='Enter'){processCmd();}else{termInput+=key;updateTerm();}}
function termBackspace(){termInput=termInput.slice(0,-1);updateTerm();}
function processCmd(){termLines.push('$ > '+termInput);if(termInput==='help'){termLines.push('help ls cat creepy_log scrapy_hack clear');}
else if(termInput==='ls'){termLines.push('creepy_log.txt phone_spider.py');}
else if(termInput==='cat creepy_log.txt'){termLines.push('"The bad guys are ghosts... hack phone to escape"');horrorEvent();}
else if(termInput==='scrapy_hack'){startScrapyHack();}
else if(termInput==='clear'){termLines=['$ > cleared'];}else{termLines.push('ERROR: '+termInput+' - spirits angry');horrorEvent();}
termInput='';updateTerm();}
window.processCmd=processCmd;window.termBackspace=termBackspace;
function startScrapyHack(){if(gameState.hacked){content.innerHTML='<p style="color:#0f0;">Data: '+gameState.phoneData+'</p>';return;}hackTerm=document.createElement('div');hackTerm.style.cssText='background:#000;color:#0f0;font-family:monospace;height:400px;overflow:auto;padding:10px;';hackTerm.innerHTML='scrapy startproject phonehack\nscrapy genspider badguy target.com\nscrapy crawl badguy\n[+] Parsing phone data...\n[+] Found: Victim logs, screams.mp3, GPS: YOUR LOCATION!\nHAUNTED DATA DOWNLOADED.';content.innerHTML='';content.appendChild(hackTerm);gameState.hacked=true;gameState.phoneData='GPS: YOUR HOUSE. Ghosts incoming...';gameState.scene=2;setTimeout(()=>playScream()||horrorEvent()||showGhost(),2000);}
function updateGameLoop(){updatePointer();if(gameState.horrorLevel>2&&Math.random()<0.01)showGhost();if(gameState.time>300&&gameState.scene<2&&!gameState.hacked){openApp('phone');}if(gameState.horrorLevel>7){pointer.style.boxShadow='0 0 30px #f00';pointer.style.background='radial-gradient(circle,#f00,#000)';}gameState.horrorVol=Math.min(1,gameState.horrorLevel/10);}
function endGame(){gameState.ended=true;desktop.innerHTML='<h1 style="position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:#f00;font-size:48px;text-shadow:0 0 20px #f00;">GAME OVER<br>Hunted Forever<br>Score: '+gameState.horrorLevel*10+'<br>Refresh to Survive Again</h1>';playScream();setInterval(playScream,2000);}
</script>
</body>
</html>

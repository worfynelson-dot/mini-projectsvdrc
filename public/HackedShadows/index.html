<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>DEAD_OS // NIGHTMARE EDITION</title>
<style>
  /* --- SYSTEM VISUALS --- */
  :root { --glass: rgba(18, 18, 18, 0.85); --accent: #ff003c; --text: #e0e0e0; }
  * { box-sizing: border-box; user-select: none; -webkit-user-select: none; cursor: default; }
  body { margin: 0; overflow: hidden; background: #000; font-family: 'Segoe UI', Tahoma, sans-serif; color: var(--text); height: 100vh; }
  
  /* WALLPAPER */
  #desktop {
    width: 100%; height: 100%; position: relative;
    background: url('https://images.unsplash.com/photo-1518558997970-4dadc8055365?q=80&w=1920&auto=format&fit=crop') center/cover;
    transition: filter 2s;
  }
  #desktop::before { content:''; position:absolute; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.4); pointer-events:none; }
  
  /* DESKTOP ICONS */
  .grid { display: flex; flex-direction: column; flex-wrap: wrap; height: 90vh; padding: 15px; gap: 10px; align-content: flex-start; }
  .icon {
    width: 84px; padding: 10px; border-radius: 6px; text-align: center; transition: 0.2s;
    text-shadow: 0 2px 4px #000; cursor: pointer; position: relative; z-index: 10;
  }
  .icon:hover { background: rgba(255,255,255,0.15); transform: scale(1.05); }
  .icon div { font-size: 38px; margin-bottom: 5px; filter: drop-shadow(0 4px 6px rgba(0,0,0,0.5)); }
  .icon span { font-size: 12px; font-weight: 500; letter-spacing: 0.5px; }

  /* WINDOW MANAGER */
  .win {
    position: absolute; background: var(--glass); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
    border: 1px solid rgba(255,255,255,0.1); border-radius: 10px; box-shadow: 0 25px 50px rgba(0,0,0,0.8);
    display: flex; flex-direction: column; overflow: hidden; animation: pop 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
    min-width: 320px; min-height: 200px;
  }
  @keyframes pop { from { opacity: 0; transform: scale(0.9) translateY(20px); } to { opacity: 1; transform: scale(1) translateY(0); } }
  
  .bar {
    height: 36px; background: rgba(255,255,255,0.03); display: flex; align-items: center; justify-content: space-between;
    padding: 0 12px; cursor: grab; border-bottom: 1px solid rgba(255,255,255,0.05);
  }
  .bar:active { cursor: grabbing; }
  .title { font-size: 13px; opacity: 0.8; display: flex; align-items: center; gap: 8px; }
  .actions { display: flex; gap: 8px; }
  .btn { width: 12px; height: 12px; border-radius: 50%; cursor: pointer; transition: 0.2s; }
  .btn.c { background: #ff5f56; } .btn.m { background: #ffbd2e; } .btn.f { background: #27c93f; }
  .btn:hover { transform: scale(1.2); filter: brightness(1.1); }
  
  .view { flex: 1; overflow: auto; position: relative; }

  /* TASKBAR */
  #taskbar {
    position: absolute; bottom: 0; width: 100%; height: 52px; background: rgba(15,15,15,0.9);
    backdrop-filter: blur(30px); display: flex; align-items: center; padding: 0 16px; z-index: 999;
    border-top: 1px solid rgba(255,255,255,0.08); box-shadow: 0 -10px 30px rgba(0,0,0,0.5);
  }
  #start { 
    font-size: 24px; margin-right: 20px; cursor: pointer; transition: 0.3s; 
    filter: drop-shadow(0 0 5px rgba(0,255,255,0.5)); 
  }
  #start:hover { filter: drop-shadow(0 0 15px rgba(0,255,255,0.8)); transform: rotate(-10deg); }
  .dock { display: flex; gap: 6px; flex: 1; }
  .app-tab {
    width: 42px; height: 42px; border-radius: 6px; display: flex; align-items: center; justify-content: center;
    background: rgba(255,255,255,0.05); transition: 0.2s; cursor: pointer; position: relative; font-size: 20px;
  }
  .app-tab:hover { background: rgba(255,255,255,0.15); transform: translateY(-3px); }
  .app-tab.active::after {
    content:''; position:absolute; bottom: -2px; width: 20px; height: 3px; 
    background: var(--accent); border-radius: 2px;
  }
  #time { font-size: 13px; font-weight: 500; color: #fff; text-shadow: 0 0 10px rgba(255,255,255,0.5); }

  /* START SCREEN */
  #boot {
    position: fixed; inset: 0; background: #000; z-index: 10000;
    display: flex; flex-direction: column; align-items: center; justify-content: center;
    cursor: pointer;
  }
  .loader { width: 200px; height: 4px; background: #333; margin-top: 20px; border-radius: 2px; overflow: hidden; }
  .fill { width: 0%; height: 100%; background: var(--accent); animation: load 3s ease-out forwards; }
  @keyframes load { to { width: 100%; } }

  /* APP SPECIFIC */
  .term-wrap { background: #0c0c0c; color: #0f0; font-family: monospace; padding: 15px; height: 100%; font-size: 14px; }
  .msg-bubble { background: #333; padding: 8px 12px; border-radius: 12px; margin: 5px 0; max-width: 80%; font-size: 13px; }
  .msg-bubble.sent { background: #005c4b; align-self: flex-end; margin-left: auto; }
  
  /* MOBILE OPTIMIZATIONS */
  @media (max-width: 600px) { 
    .win { left: 0 !important; top: 0 !important; width: 100% !important; height: 100% !important; border-radius: 0; }
    .bar { height: 45px; } 
    .btn { width: 16px; height: 16px; }
    .icon { width: 70px; }
  }
</style>
</head>
<body>

<!-- START SCREEN -->
<div id="boot" onclick="SYS.start()">
  <h1 style="color:#fff; letter-spacing: 5px;">DEAD_OS</h1>
  <div style="color:#666; margin-top:10px;">[ TAP TO INITIALIZE SYSTEM ]</div>
  <div class="loader"><div class="fill"></div></div>
</div>

<!-- DESKTOP -->
<div id="desktop">
  <div class="grid">
    <div class="icon" onclick="APP.open('pc')"><div>üíª</div><span>This PC</span></div>
    <div class="icon" onclick="APP.open('terminal')"><div>üìü</div><span>Terminal</span></div>
    <div class="icon" onclick="APP.open('scrcpy')"><div>üì±</div><span>Scrcpy</span></div>
    <div class="icon" onclick="APP.open('browser')"><div>üåç</div><span>Tor</span></div>
    <div class="icon" onclick="APP.open('trash')"><div>üóëÔ∏è</div><span>Trash</span></div>
    <div class="icon" onclick="APP.open('music')"><div>üéµ</div><span>Music</span></div>
    <div class="icon" onclick="APP.open('gallery')"><div>üì∑</div><span>Photos</span></div>
    <div class="icon" onclick="APP.open('notes')"><div>üìù</div><span>Notes</span></div>
  </div>
  
  <!-- Windows Layer -->
  <div id="wins"></div>

  <!-- Taskbar -->
  <div id="taskbar">
    <div id="start">‚ùñ</div>
    <div class="dock" id="dock"></div>
    <div id="time">00:00</div>
  </div>
</div>

<!-- ========================================== -->
<!-- SCRIPT 1: SYSTEM ENGINE (The core OS)      -->
<!-- ========================================== -->
<script>
const SYS = {
  z: 100,
  audioCtx: null,
  
  start: function() {
    document.getElementById('boot').style.display = 'none';
    this.audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    this.playAmbience();
    this.updateClock();
    setInterval(() => this.updateClock(), 1000);
    setTimeout(() => APP.open('notes'), 500); // Auto open notes
    
    // Global Inputs
    window.addEventListener('mouseup', () => this.stopDrag());
    window.addEventListener('touchend', () => this.stopDrag());
    window.addEventListener('mousemove', (e) => this.drag(e));
    window.addEventListener('touchmove', (e) => this.drag(e), {passive: false});
  },

  updateClock: function() {
    const d = new Date();
    document.getElementById('time').innerText = 
      d.getHours().toString().padStart(2,'0') + ':' + d.getMinutes().toString().padStart(2,'0');
  },

  // Window Factory
  createWin: function(id, title, html, w=400, h=300) {
    if(document.getElementById('w-'+id)) return this.focus(id);
    
    const win = document.createElement('div');
    win.className = 'win';
    win.id = 'w-'+id;
    win.style.width = w+'px';
    win.style.height = h+'px';
    win.style.zIndex = ++this.z;
    // Random spawn position
    const left = Math.random() * (window.innerWidth - w - 20) + 10;
    const top = Math.random() * (window.innerHeight - h - 100) + 10;
    win.style.left = Math.max(0, left) + 'px';
    win.style.top = Math.max(0, top) + 'px';

    win.innerHTML = `
      <div class="bar" onmousedown="SYS.startDrag(event, '${id}')" ontouchstart="SYS.startDrag(event, '${id}')">
        <div class="title">${title}</div>
        <div class="actions">
          <div class="btn m"></div>
          <div class="btn c" onclick="SYS.close('${id}')"></div>
        </div>
      </div>
      <div class="view">${html}</div>
    `;
    
    win.onmousedown = () => this.focus(id);
    document.getElementById('wins').appendChild(win);
    this.addTask(id, title);
  },

  close: function(id) {
    document.getElementById('w-'+id).remove();
    document.getElementById('t-'+id).remove();
  },

  focus: function(id) {
    const el = document.getElementById('w-'+id);
    if(el) el.style.zIndex = ++this.z;
    document.querySelectorAll('.app-tab').forEach(t => t.classList.remove('active'));
    const task = document.getElementById('t-'+id);
    if(task) task.classList.add('active');
  },

  addTask: function(id, title) {
    const dock = document.getElementById('dock');
    const tab = document.createElement('div');
    tab.className = 'app-tab active';
    tab.id = 't-'+id;
    tab.innerHTML = title[0];
    tab.onclick = () => this.focus(id);
    dock.appendChild(tab);
  },

  // Drag Logic
  dragEl: null, offX: 0, offY: 0,
  startDrag: function(e, id) {
    this.dragEl = document.getElementById('w-'+id);
    this.focus(id);
    const clientX = e.touches ? e.touches[0].clientX : e.clientX;
    const clientY = e.touches ? e.touches[0].clientY : e.clientY;
    const rect = this.dragEl.getBoundingClientRect();
    this.offX = clientX - rect.left;
    this.offY = clientY - rect.top;
  },
  drag: function(e) {
    if(!this.dragEl) return;
    e.preventDefault();
    const clientX = e.touches ? e.touches[0].clientX : e.clientX;
    const clientY = e.touches ? e.touches[0].clientY : e.clientY;
    this.dragEl.style.left = (clientX - this.offX) + 'px';
    this.dragEl.style.top = (clientY - this.offY) + 'px';
  },
  stopDrag: function() { this.dragEl = null; },

  // Audio Engine
  playAmbience: function() {
    const osc = this.audioCtx.createOscillator();
    const gain = this.audioCtx.createGain();
    const filter = this.audioCtx.createBiquadFilter();
    
    osc.type = 'sawtooth';
    osc.frequency.value = 40; // Low horror drone
    filter.type = 'lowpass';
    filter.frequency.value = 120;
    
    osc.connect(filter);
    filter.connect(gain);
    gain.connect(this.audioCtx.destination);
    
    gain.gain.value = 0.15;
    osc.start();
    this.ambience = osc;
  },
  
  toggleAudio: function() {
    if(this.audioCtx.state === 'running') this.audioCtx.suspend();
    else this.audioCtx.resume();
  }
};
</script>

<!-- ========================================== -->
<!-- SCRIPT 2: GAME LOGIC (Apps, Puzzles, Horror) -->
<!-- ========================================== -->
<script>
const GAME = {
  gpsUnlocked: false,
  phoneUnlocked: false
};

const APP = {
  open: function(name) {
    switch(name) {
      case 'notes':
        SYS.createWin('notes', 'üìù Mission', `
          <div style="padding:20px; color:#ddd; line-height:1.6;">
            <h3>CASE FILE: NIGHT STALKER</h3>
            <p>1. Victim's phone is locked. Hack it using <b>Scrcpy</b>.</p>
            <p>2. You need to enable ADB in <b>Terminal</b>.</p>
            <p>3. The password was deleted. Check the <b>Trash</b>.</p>
            <hr>
            <p style="color:#ff003c">WARNING: Don't let him find you.</p>
          </div>
        `, 350, 400);
        break;

      case 'trash':
        SYS.createWin('trash', 'üóëÔ∏è Trash', `
          <div style="padding:10px; display:grid; grid-template-columns: repeat(3, 1fr); gap:10px;">
            <div onclick="alert('File corrupted.')" class="icon" style="width:100%"><div>üìÑ</div>bad.txt</div>
            <div onclick="alert('System File.')" class="icon" style="width:100%"><div>‚öôÔ∏è</div>sys.dll</div>
            <div onclick="APP.showPass()" class="icon" style="width:100%"><div>üîë</div><b>system_pass.txt</b></div>
          </div>
        `);
        break;

      case 'terminal':
        SYS.createWin('terminal', 'üìü Terminal', `
          <div class="term-wrap" onclick="document.getElementById('cmd').focus()">
            <div>Windows PowerShell [v1.0]<br>(c) Microsoft Corporation.<br><br>Type 'help' for commands.</div>
            <div id="history"></div>
            <div style="display:flex; margin-top:5px;">
              <span style="color:#ff003c">root@admin:~$&nbsp;</span>
              <input id="cmd" style="background:transparent; border:none; color:#fff; font-family:monospace; flex:1; outline:none;" 
                onkeydown="APP.handleCmd(event)" autocomplete="off">
            </div>
          </div>
        `, 500, 350);
        break;

      case 'scrcpy':
        let content = GAME.phoneUnlocked ? `
          <div style="height:100%; display:flex; flex-direction:column; background:#111;">
            <div style="padding:10px; background:#222; font-size:12px; display:flex; justify-content:space-between;">
              <span>LTE</span><span>üîã 12%</span>
            </div>
            <div style="flex:1; padding:15px; display:flex; flex-direction:column; overflow-y:auto;">
              <div class="msg-bubble">Where did you hide it?</div>
              <div class="msg-bubble sent">The old warehouse.</div>
              <div class="msg-bubble sent">Coordinates attached.</div>
              <div class="msg-bubble" style="background:#444; cursor:pointer; border:1px solid #ff003c;" onclick="APP.hackGPS()">
                <div>üìç <b>GPS_LOCATION.dat</b></div>
                <small>(Tap to download)</small>
              </div>
            </div>
          </div>
        ` : `
          <div style="height:100%; display:flex; flex-direction:column; align-items:center; justify-content:center; color:#ff003c; text-align:center;">
            <div style="font-size:50px;">üîí</div>
            <h2>DEVICE LOCKED</h2>
            <p>ADB Debugging Unauthorized.</p>
            <p style="color:#888; margin-top:10px;">Use Terminal to connect.</p>
          </div>
        `;
        SYS.createWin('scrcpy', 'üì± Pixel 6', content, 300, 550);
        break;

      case 'browser':
        SYS.createWin('browser', 'üåç Tor Browser', `
          <div style="background:#333; padding:5px; font-size:12px; color:#aaa;">onion://hidden-wiki/tracker</div>
          <div style="padding:20px;">
            <h2 style="color:#fff;">Dark Net Tracker</h2>
            ${GAME.gpsUnlocked 
              ? '<h1 style="color:#0f0;">TARGET LOCATED</h1><p>Location: Abandoned Warehouse, Sector 4.</p><p>Police dispatched.</p>' 
              : '<p>Waiting for GPS signal...</p>'}
          </div>
        `);
        break;
        
      case 'music':
        SYS.createWin('music', 'üéµ Player', `
          <div style="display:flex; flex-direction:column; align-items:center; justify-content:center; height:100%;">
            <h3>Ambient Horror.mp3</h3>
            <div style="margin:20px; font-size:30px; cursor:pointer;" onclick="SYS.toggleAudio()">‚èØÔ∏è</div>
            <p>Click to Pause/Play</p>
          </div>
        `, 250, 200);
        break;

      case 'pc': SYS.createWin('pc', 'üíª This PC', '<div style="padding:20px;">C:\\ Drive<br><br>1.2TB Free</div>'); break;
      case 'gallery': SYS.createWin('gallery', 'üì∑ Gallery', '<div style="padding:20px;">No images found.</div>'); break;
    }
  },

  // GAME EVENTS
  showPass: function() {
    alert("system_pass.txt\n\nAccess Code: 666");
  },

  hackGPS: function() {
    alert("DOWNLOADING GPS DATA...");
    setTimeout(() => {
      GAME.gpsUnlocked = true;
      alert("DOWNLOAD COMPLETE.\nCheck 'Tor Browser' to view location.");
      APP.triggerEnding();
    }, 1500);
  },
  
  triggerEnding: function() {
    setTimeout(() => {
      document.getElementById('desktop').style.filter = "grayscale(100%) contrast(200%)";
      alert("THEY ARE COMING. pls see my upscrolled account\n@Dittxz On Upscrolled");
    }, 3000);
  },

  // TERMINAL COMMANDS
  handleCmd: function(e) {
    if(e.key === 'Enter') {
      const val = e.target.value.trim();
      const hist = document.getElementById('history');
      hist.innerHTML += `<div><span style="color:#ff003c">root@admin:~$&nbsp;</span>${val}</div>`;
      e.target.value = '';

      if(val === 'help') {
        hist.innerHTML += `<div style="color:#888;">Available: help, adb connect, clear</div>`;
      } 
      else if(val === 'adb connect') {
        // Simple Prompt
        const pass = prompt("ENTER ACCESS CODE:");
        if(pass === '666') {
          hist.innerHTML += `<div style="color:#0f0;">ACCESS GRANTED.<br>Connected to Pixel 6.</div>`;
          GAME.phoneUnlocked = true;
          SYS.close('scrcpy'); // Close if open to refresh
          setTimeout(() => APP.open('scrcpy'), 500);
        } else {
          hist.innerHTML += `<div style="color:red;">ACCESS DENIED.</div>`;
        }
      }
      else if(val === 'clear') {
        hist.innerHTML = '';
      }
      else {
        hist.innerHTML += `<div style="color:red;">Command not found.</div>`;
      }
      
      // Auto scroll
      e.target.parentElement.parentElement.scrollTop = e.target.parentElement.parentElement.scrollHeight;
    }
  }
};
</script>
</body>
</html>
